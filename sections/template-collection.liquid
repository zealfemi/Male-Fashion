<!-- Breadcrumb Begin -->
<div class="breadcrumb-option">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="breadcrumb__links">
          <a href="{{ shop.url }}">
            <i class="fa fa-home"></i>
            Home</a>
          <span>{{ collection.title }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Breadcrumb End -->

<div class="container">
  <a href="{{ routes.collections_url }}" class="text-base text-gray-500 hover:underline text-center block">Go back to collections</a>

  <div class="product spad">
    {% paginate collection.products by section.settings.number_of_products_per_page %}

      <div class="section-title">
        <h4>{{ collection.title }}</h4>
      </div>

      <div class="container">
        <label for="sort-by">Sort by</label> 
        <select id="sort-by" class="sort-by">
          {% for option in collection.sort_options %}
            {% if option.value == "title-ascending" %}
              <option value="{{ option.value }}"{% if option.value == collection.sort_by %} selected{% endif %}>{{ option.name }}</option>
              
            {% elsif option.value == "title-descending"%}
              <option value="{{ option.value }}"{% if option.value == collection.sort_by %} selected{% endif %}>{{ option.name }}</option>

            {% else %}
              <option value="{{ option.value }}"{% if option.value == collection.sort_by %} selected{% endif %}>{{ option.name }}</option>
            {% endif %}
          {% endfor %}
        </select>
      </div>

      <div class="max-w-6xl mx-auto">
        <div class="row property__gallery">
          {% for product in collection.products %}
            {% render 'product-card', products_card: product %}

          {% else %}
            {% for item in (1..3) %}
              {% render 'product-card-placeholder' %}
            {% endfor %}
            <p>There are no products available</p>
          {% endfor %}
        </div>
      </div>

      {% render 'pagination', pagination: paginate %}
    {% endpaginate %}
  </div>
</div>

<script type="text/javascript">
  // Save existing sort parameters
  Shopify.queryParams = {};
        if(location.search.length) {
          for(var aKeyValue, i = 0, aCouples = location.search.substr(1).split('&'); i < aCouples.length; i++) {
            aKeyValue = aCouples[i].split('=');
            if (aKeyValue.length > 1) {
              Shopify.queryParams[decodeURIComponent(aKeyValue[0])] = decodeURIComponent(aKeyValue[1]);
            }
          }
        }
      
        // Add existing sort parameters to current URL
        document.querySelector('.sort-by').addEventListener('change', function(e) {
          var value = e.currentTarget.value;
          Shopify.queryParams.sort_by = value;
          location.search = new URLSearchParams(Shopify.queryParams).toString();
        });</script>

{% schema %}
  {
    "name": "Template Collection",
    "settings": [
      {
        "type": "range",
        "id": "number_of_products_per_page",
        "min": 1,
        "max": 15,
        "default": 8,
        "label": "Number of products per page"
      }, {
        "type": "checkbox",
        "id": "display_vendor",
        "label": "Display Vendor Information",
        "default": true
      }
    ]
  }
{% endschema %}